<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>Lịch sinh hoạt & học tập</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f5f5f5;
      color: #333;
      margin: 0;
      padding: 20px;
    }
    h1, h2 {
      text-align: center;
    }
    #clock {
      font-size: 24px;
      text-align: center;
      margin-bottom: 20px;
    }
    .task {
      background: white;
      padding: 10px;
      margin: 8px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .current {
      background: #d1ffd1;
      border-left: 5px solid green;
    }
  </style>
</head>
<body>
  <h1>Lịch sinh hoạt & học tập</h1>
  <div id="clock">--:--:--</div>
  <h2 id="today"></h2>
  <div id="schedule"></div>

  <script>
    // ---------------- LỊCH TRÌNH ----------------
    const schedules = {
      "Mon": [
        ["22:30","02:00","Ngủ chính - Giấc ngủ quan trọng nhất"],
        ["02:00","03:30","Toán - Tập trung cao độ"],
        ["03:30","04:15","Tin - Thực hành bài tập"],
        ["04:15","05:00","Anh - Từ vựng và ngữ pháp"],
        ["05:00","05:30","Ăn nhẹ, thư giãn"],
        ["05:30","06:00","Vệ sinh, chuẩn bị"],
        ["06:00","11:30","Đi học buổi sáng"],
        ["11:30","13:30","Ăn trưa + Ngủ"],
        ["13:30","14:00","Chuẩn bị buổi chiều"],
        ["14:00","16:35","Đi học buổi chiều"],
        ["16:35","17:30","Về nhà, thư giãn"],
        ["17:30","19:30","Ăn tối + Nghỉ ngơi"],
        ["19:30","20:30","Làm bài tập trên lớp"],
        ["20:30","21:30","Toán - Luyện tập"],
        ["21:30","22:30","Anh - Ngữ pháp, luyện nghe"]
      ],
      "Wed": "same",
      "Fri": "same",
      "Sat": "same",

      "Tue": [
        ["22:30","02:00","Ngủ chính"],
        ["02:00","03:30","Toán"],
        ["03:30","04:15","Anh"],
        ["04:15","05:00","Môn phụ (Sử/Địa/GDCD)"],
        ["05:00","05:30","Ăn nhẹ, thư giãn"],
        ["05:30","06:00","Vệ sinh, chuẩn bị"],
        ["06:00","11:30","Đi học buổi sáng"],
        ["11:30","13:30","Ăn trưa + Ngủ"],
        ["13:30","14:00","Chuẩn bị buổi chiều"],
        ["14:00","16:35","Đi học buổi chiều"],
        ["16:35","17:30","Chuẩn bị đi học thêm"],
        ["17:30","19:30","Đi học thêm Toán"],
        ["19:30","20:30","Về nhà, ăn tối muộn + Bài tập"],
        ["20:30","21:30","Toán - Ôn luyện"],
        ["21:30","22:30","Anh - Ngữ pháp, luyện nghe"]
      ],
      "Thu": "Tue",

      "Sun": [
        ["22:30","02:00","Ngủ chính"],
        ["02:00","03:30","Tin - Thực hành bài tập"],
        ["03:30","04:15","Anh"],
        ["04:15","05:00","Toán - Luyện tập"],
        ["05:00","05:30","Ăn nhẹ, thư giãn"],
        ["05:30","06:00","Vệ sinh cá nhân"],
        ["06:00","11:30","Tự học môn phụ / Nghỉ ngơi"],
        ["11:30","13:30","Ăn trưa + Ngủ"],
        ["13:30","14:00","Thư giãn"],
        ["14:00","16:35","Làm bài tập cuối tuần"],
        ["16:35","17:30","Nghỉ ngơi"],
        ["17:30","19:30","Ăn tối + Nghỉ ngơi"],
        ["19:30","20:30","Ôn tập tổng hợp"],
        ["20:30","21:30","Toán (luyện đề)"],
        ["21:30","22:30","Ôn tất cả môn"]
      ]
    };

    // Copy lịch từ Mon sang Wed, Fri, Sat
    ["Wed","Fri","Sat"].forEach(d => schedules[d] = schedules["Mon"]);

    // ---------------- HÀM HỖ TRỢ ----------------
    function parseTime(t) {
      let [h,m] = t.split(":").map(Number);
      return h*60 + m;
    }

    function getTodaySchedule() {
      const days = ["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];
      const today = new Date().getDay();
      return {day: days[today], schedule: schedules[days[today]]};
    }

    // ---------------- HIỂN THỊ ----------------
    function renderSchedule() {
      const {day, schedule} = getTodaySchedule();
      document.getElementById("today").innerText = "Hôm nay: " + day;
      const now = new Date();
      const nowMinutes = now.getHours()*60 + now.getMinutes();
      const container = document.getElementById("schedule");
      container.innerHTML = "";

      schedule.forEach(([start,end,desc]) => {
        const s = parseTime(start);
        const e = parseTime(end);
        const div = document.createElement("div");
        div.className = "task";
        div.innerText = `${start} - ${end}: ${desc}`;
        if (nowMinutes >= s && nowMinutes < e) {
          div.classList.add("current");
          notify(desc);
        }
        container.appendChild(div);
      });
    }

    // ---------------- ĐỒNG HỒ ----------------
    function updateClock() {
      const now = new Date();
      document.getElementById("clock").innerText = 
        now.toLocaleTimeString("vi-VN");
      renderSchedule();
    }

    setInterval(updateClock, 1000);

    // ---------------- THÔNG BÁO ----------------
    function notify(text) {
      if (!("Notification" in window)) return;
      if (Notification.permission === "granted") {
        if (!window.lastNotify || window.lastNotify !== text) {
          new Notification("Đến giờ!", { body: text });
          window.lastNotify = text;
        }
      } else if (Notification.permission !== "denied") {
        Notification.requestPermission();
      }
    }

    // chạy lần đầu
    updateClock();
  </script>
</body>
</html>
